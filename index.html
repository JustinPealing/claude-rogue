<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Roguelike Game</title>
    <style>
        body {
            margin: 0;
            padding: 20px;
            background-color: #000;
            color: #fff;
            font-family: monospace;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: flex-start;
            min-height: 100vh;
        }

        h1 {
            color: #0f0;
            margin-bottom: 10px;
        }

        #game {
            display: flex;
            justify-content: center;
            align-items: center;
            margin-bottom: 10px;
        }

        canvas {
            border: 2px solid #0f0;
        }

        #controls {
            margin-top: 10px;
            text-align: center;
        }

        #mobileInput {
            width: 100%;
            max-width: 300px;
            padding: 15px;
            font-size: 24px;
            background-color: #222;
            color: #0f0;
            border: 2px solid #0f0;
            border-radius: 5px;
            text-align: center;
            font-family: monospace;
        }

        #mobileInput:focus {
            outline: none;
            border-color: #0ff;
            background-color: #333;
        }

        .instructions {
            color: #0f0;
            margin-top: 10px;
            font-size: 14px;
        }
    </style>
</head>
<body>
    <h1>Hello World - Roguelike</h1>
    <div id="game"></div>

    <div id="controls">
        <input type="text" id="mobileInput" inputmode="numeric" placeholder="Tap to move">
        <div class="instructions">
            Use: 2=Up, 8=Down, 4=Left, 6=Right
        </div>
    </div>

    <!-- Include ROT.js from CDN -->
    <script src="https://cdn.jsdelivr.net/npm/rot-js@2/dist/rot.min.js"></script>

    <script>
        // Create a display
        const display = new ROT.Display({
            width: 40,
            height: 20,
            fontSize: 16
        });

        // Add it to the page
        document.getElementById('game').appendChild(display.getContainer());

        // Player state
        const centerX = Math.floor(display._options.width / 2);
        const centerY = Math.floor(display._options.height / 2);

        let player = {
            x: centerX,
            y: centerY + 2
        };

        // Function to draw the entire game
        function drawGame() {
            display.clear();

            // Draw "Hello World" in the center
            display.drawText(centerX - 5, centerY, "Hello World!");

            // Draw a simple border
            for (let x = 0; x < display._options.width; x++) {
                display.draw(x, 0, "#", "#0f0");
                display.draw(x, display._options.height - 1, "#", "#0f0");
            }

            for (let y = 0; y < display._options.height; y++) {
                display.draw(0, y, "#", "#0f0");
                display.draw(display._options.width - 1, y, "#", "#0f0");
            }

            // Draw the player @ symbol
            display.draw(player.x, player.y, "@", "#ff0");
        }

        // Function to move player
        function movePlayer(dx, dy) {
            const newX = player.x + dx;
            const newY = player.y + dy;

            // Check boundaries (don't allow moving into walls)
            if (newX > 0 && newX < display._options.width - 1 &&
                newY > 0 && newY < display._options.height - 1) {
                player.x = newX;
                player.y = newY;
                drawGame();
            }
        }

        // Get the mobile input element
        const mobileInput = document.getElementById('mobileInput');

        // Handle keyboard input for mobile
        mobileInput.addEventListener('keydown', function(e) {
            // Handle movement keys: 2=up, 8=down, 4=left, 6=right
            switch(e.key) {
                case '2':
                    movePlayer(0, -1); // Up
                    break;
                case '8':
                    movePlayer(0, 1);  // Down
                    break;
                case '4':
                    movePlayer(-1, 0); // Left
                    break;
                case '6':
                    movePlayer(1, 0);  // Right
                    break;
            }

            // Clear input to prevent number buildup
            e.preventDefault();
            this.value = '';
        });

        // Keep input focused to maintain keyboard visibility
        mobileInput.addEventListener('blur', function() {
            setTimeout(() => this.focus(), 0);
        });

        // Initial draw
        drawGame();

        // Auto-focus the input on page load
        setTimeout(() => mobileInput.focus(), 100);

        console.log("ROT.js loaded successfully!");
        console.log("Mobile controls initialized! Use 2, 4, 8, 6 to move.");
    </script>
</body>
</html>
